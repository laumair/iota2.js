!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("cross-fetch"),require("tweetnacl"),require("blakejs"),require("ed25519-hd-key")):"function"==typeof define&&define.amd?define(["exports","cross-fetch","tweetnacl","blakejs","ed25519-hd-key"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Iota2={},e["cross-fetch"],e.tweetnacl,e.blakejs,e["ed25519-hd-key"])}(this,(function(e,t,n,r,i){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=o(t),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function u(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var c=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.route=n,o.httpStatus=r,o.code=i,o}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),f=function(){function e(e){if(!/^https?:\/\/\w+(\.\w+)*(:\d+)?(\/.*)?$/.test(e))throw new Error("The endpoint is not in the correct format");this._endpoint=e.replace(/\/+$/,"")}return e.prototype.health=function(){return u(this,void 0,Promise,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this.fetchStatus("/health")];case 1:if(200===(e=t.sent()))return[2,!0];if(503===e)return[2,!1];throw new c("Unexpected response code","/health",e)}}))}))},e.prototype.info=function(){return u(this,void 0,Promise,(function(){return d(this,(function(e){return[2,this.fetchJson("get","/api/v1/info")]}))}))},e.prototype.tips=function(){return u(this,void 0,Promise,(function(){return d(this,(function(e){return[2,this.fetchJson("get","/api/v1/tips")]}))}))},e.prototype.message=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/messages/"+e)]}))}))},e.prototype.messageMetadata=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/messages/"+e+"/metadata")]}))}))},e.prototype.messageRaw=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchBinary("get","/api/v1/messages/"+e+"/raw")]}))}))},e.prototype.messageSubmit=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.fetchJson("post","/api/v1/messages",e)];case 1:return[2,t.sent().messageId]}}))}))},e.prototype.messageSubmitRaw=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.fetchBinary("post","/api/v1/messages",e)];case 1:return[2,t.sent().messageId]}}))}))},e.prototype.messagesFind=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/messages?index="+encodeURIComponent(e))]}))}))},e.prototype.messageChildren=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/messages/"+e+"/children")]}))}))},e.prototype.output=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/outputs/"+e)]}))}))},e.prototype.address=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/addresses/"+e)]}))}))},e.prototype.addressOutputs=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/addresses/"+e+"/outputs")]}))}))},e.prototype.milestone=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){return[2,this.fetchJson("get","/api/v1/milestones/"+e)]}))}))},e.prototype.fetchStatus=function(e){return u(this,void 0,Promise,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,s.default(""+this._endpoint+e,{method:"get"})];case 1:return[2,t.sent().status]}}))}))},e.prototype.fetchJson=function(e,t,n){var r,i,o;return u(this,void 0,Promise,(function(){var a,u;return d(this,(function(d){switch(d.label){case 0:return[4,s.default(""+this._endpoint+t,{method:e,headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0})];case 1:return[4,(a=d.sent()).json()];case 2:if(u=d.sent(),a.ok&&!u.error)return[2,u.data];throw new c(null!==(i=null===(r=u.error)||void 0===r?void 0:r.message)&&void 0!==i?i:a.statusText,t,a.status,null===(o=u.error)||void 0===o?void 0:o.code)}}))}))},e.prototype.fetchBinary=function(e,t,n){var r,i,o;return u(this,void 0,Promise,(function(){var a,u,f,l;return d(this,(function(d){switch(d.label){case 0:return[4,s.default(""+this._endpoint+t,{method:"get",headers:{"Content-Type":"application/octet-stream"},body:n})];case 1:return(a=d.sent()).ok?"get"!==e?[3,3]:(l=(f=Buffer).from,[4,a.arrayBuffer()]):[3,5];case 2:return[2,l.apply(f,[d.sent()])];case 3:return[4,a.json()];case 4:if(!(null==(u=d.sent())?void 0:u.error))return[2,null==u?void 0:u.data];d.label=5;case 5:return u?[3,7]:[4,a.json()];case 6:u=d.sent(),d.label=7;case 7:throw new c(null!==(i=null===(r=null==u?void 0:u.error)||void 0===r?void 0:r.message)&&void 0!==i?i:a.statusText,t,a.status,null===(o=null==u?void 0:u.error)||void 0===o?void 0:o.code)}}))}))},e}(),l=function(){function e(){}return e.sum256=function(t){return Buffer.from(r.blake2b(Buffer.from(t,"hex"),void 0,e.SIZE_256)).toString("hex")},e.SIZE_256=32,e}(),h=function(){function e(){}return e.signData=function(e,t){return Buffer.from(n.sign.detached(t,Buffer.from(e,"hex"))).toString("hex")},e.verifyData=function(e,t,r){return n.sign.detached.verify(r,Buffer.from(t,"hex"),Buffer.from(e,"hex"))},e.signAddress=function(e){return l.sum256(e)},e.verifyAddress=function(t,n){return e.signAddress(t)===n},e.VERSION=1,e.PUBLIC_KEY_SIZE=32,e.SIGNATURE_SIZE=64,e.ADDRESS_LENGTH=l.SIZE_256,e}(),p=l.SIZE_256,g=l.SIZE_256;function y(e){return e.length%2!=1&&/[\da-f]/gi.test(e)}var m=h.ADDRESS_LENGTH;function I(e){if(!e.hasRemaining(1))throw new Error("Address data is "+e.length()+" in length which is less than the minimimum size required of 1");var t=e.readByte("address.type");if(1!==t)throw new Error("Unrecognized address type "+t);return _(e)}function w(e,t){if(e.writeByte("address.type",t.type),1!==t.type)throw new Error("Unrecognized address type "+t.type);x(e,t)}function _(e){if(!e.hasRemaining(m))throw new Error("Ed25519 address data is "+e.length()+" in length which is less than the minimimum size required of "+m);return{type:1,address:e.readFixedBufferHex("ed25519Address.address",h.ADDRESS_LENGTH)}}function x(e,t){e.writeFixedBufferHex("ed25519Address.address",h.ADDRESS_LENGTH,t.address)}var E=g+2;function v(e){for(var t=e.readUInt16("inputs.numInputs"),n=[],r=0;r<t;r++)n.push(S(e));return n}function U(e,t){e.writeUInt16("inputs.numInputs",t.length);for(var n=0;n<t.length;n++)B(e,t[n])}function S(e){if(!e.hasRemaining(1))throw new Error("Input data is "+e.length()+" in length which is less than the minimimum size required of 1");var t=e.readByte("input.type");if(0!==t)throw new Error("Unrecognized input type "+t);return b(e)}function B(e,t){if(e.writeByte("input.type",t.type),0!==t.type)throw new Error("Unrecognized input type "+t.type);k(e,t)}function b(e){if(!e.hasRemaining(E))throw new Error("UTXO Input data is "+e.length()+" in length which is less than the minimimum size required of "+E);return{type:0,transactionId:e.readFixedBufferHex("utxoInput.transactionId",g),transactionOutputIndex:e.readUInt16("utxoInput.transactionOutputIndex")}}function k(e,t){e.writeFixedBufferHex("utxoInput.transactionId",g,t.transactionId),e.writeUInt16("utxoInput.transactionOutputIndex",t.transactionOutputIndex)}var T=2+m;function N(e){for(var t=e.readUInt16("outputs.numOutputs"),n=[],r=0;r<t;r++)n.push(P(e));return n}function z(e,t){e.writeUInt16("outputs.numOutputs",t.length);for(var n=0;n<t.length;n++)R(e,t[n])}function P(e){if(!e.hasRemaining(1))throw new Error("Output data is "+e.length()+" in length which is less than the minimimum size required of 1");var t=e.readByte("output.type");if(0!==t)throw new Error("Unrecognized output type "+t);return L(e)}function R(e,t){if(e.writeByte("output.type",t.type),0!==t.type)throw new Error("Unrecognized output type "+t.type);M(e,t)}function L(e){if(!e.hasRemaining(T))throw new Error("Signature Locked Single Output data is "+e.length()+" in length which is less than the minimimum size required of "+T);var t=I(e),n=e.readUInt64("address.amount");return{type:0,address:t,amount:Number(n)}}function M(e,t){w(e,t.address),e.writeUInt64("address.amount",BigInt(t.amount))}function O(e){if(!e.hasRemaining(8))throw new Error("Transaction essence data is "+e.length()+" in length which is less than the minimimum size required of 8");var t=v(e),n=N(e),r=V(e);if(r&&2!==r.type)throw new Error("Transaction essence can only contain embedded Indexation Payload");return{type:0,inputs:t,outputs:n,payload:r}}function H(e,t){U(e,t.inputs),z(e,t.outputs),Q(e,t.payload)}var A=h.SIGNATURE_SIZE+h.PUBLIC_KEY_SIZE;function G(e){if(!e.hasRemaining(1))throw new Error("Signature data is "+e.length()+" in length which is less than the minimimum size required of 1");var t=e.readByte("signature.type");if(1!==t)throw new Error("Unrecognized signature type "+t);return D(e)}function K(e,t){if(e.writeByte("signature.type",t.type),1!==t.type)throw new Error("Unrecognized signature type "+t.type);C(e,t)}function D(e){if(!e.hasRemaining(A))throw new Error("Ed25519 signature data is "+e.length()+" in length which is less than the minimimum size required of "+A);return{type:1,publicKey:e.readFixedBufferHex("ed25519Signature.publicKey",h.PUBLIC_KEY_SIZE),signature:e.readFixedBufferHex("ed25519Signature.signature",h.SIGNATURE_SIZE)}}function C(e,t){e.writeFixedBufferHex("ed25519Signature.publicKey",h.PUBLIC_KEY_SIZE,t.publicKey),e.writeFixedBufferHex("ed25519Signature.signature",h.SIGNATURE_SIZE,t.signature)}var F=1+A;function Z(e){for(var t=e.readUInt16("transactionEssence.numUnlockBlocks"),n=[],r=0;r<t;r++)n.push(j(e));return n}function q(e,t){e.writeUInt16("transactionEssence.numUnlockBlocks",t.length);for(var n=0;n<t.length;n++)J(e,t[n])}function j(e){if(!e.hasRemaining(1))throw new Error("Unlock Block data is "+e.length()+" in length which is less than the minimimum size required of 1");var t,n=e.readByte("unlockBlock.type");if(0===n)t=Y(e);else{if(1!==n)throw new Error("Unrecognized unlock block type "+n);t=X(e)}return t}function J(e,t){if(e.writeByte("unlockBlock.type",t.type),0===t.type)W(e,t);else{if(1!==t.type)throw new Error("Unrecognized unlock block type "+t.type);$(e,t)}}function Y(e){if(!e.hasRemaining(F))throw new Error("Signature Unlock Block data is "+e.length()+" in length which is less than the minimimum size required of "+F);return{type:0,signature:G(e)}}function W(e,t){K(e,t.signature)}function X(e){if(!e.hasRemaining(2))throw new Error("Reference Unlock Block data is "+e.length()+" in length which is less than the minimimum size required of 2");return{type:1,reference:e.readUInt16("referenceUnlockBlock.reference")}}function $(e,t){e.writeUInt16("referenceUnlockBlock.reference",t.reference)}function V(e){if(!e.hasRemaining(4))throw new Error("Payload data is "+e.length()+" in length which is less than the minimimum size required of 4");var t,n=e.readUInt32("payload.length");if(!e.hasRemaining(n))throw new Error("Payload length "+n+" exceeds the remaining data "+e.unused());if(n>0){var r=e.readUInt32("payload.type");if(0===r)t=ee(e);else if(1===r)t=ne(e);else{if(2!==r)throw new Error("Unrecognized payload type "+r);t=ie(e)}}return t}function Q(e,t){var n=e.getWriteIndex();if(e.writeUInt32("payload.length",0),t)if(0===t.type)e.writeUInt32("payload.type",t.type),te(e,t);else if(1===t.type)e.writeUInt32("payload.type",t.type),re(e,t);else{if(2!==t.type)throw new Error("Unrecognized transaction type "+t.type);e.writeUInt32("payload.type",t.type),oe(e,t)}else;var r=e.getWriteIndex();e.setWriteIndex(n),e.writeUInt32("payload.length",r-n-4),e.setWriteIndex(r)}function ee(e){if(!e.hasRemaining(4))throw new Error("Transaction Payload data is "+e.length()+" in length which is less than the minimimum size required of 4");var t=e.readUInt32("payloadTransaction.type");if(0!==t)throw new Error("Unrecognized transaction type "+t);return{type:0,essence:O(e),unlockBlocks:Z(e)}}function te(e,t){if(e.writeUInt32("payloadTransaction.type",t.type),0!==t.type)throw new Error("Unrecognized transaction type "+t.type);H(e,t.essence),q(e,t.unlockBlocks)}function ne(e){if(!e.hasRemaining(144))throw new Error("Milestone Payload data is "+e.length()+" in length which is less than the minimimum size required of 144");var t=e.readUInt64("payloadMilestone.index"),n=e.readUInt64("payloadMilestone.timestamp"),r=e.readFixedBufferHex("payloadMilestone.inclusionMerkleProof",64),i=e.readFixedBufferHex("payloadMilestone.signature",64);return{type:1,index:Number(t),timestamp:Number(n),inclusionMerkleProof:r,signature:i}}function re(e,t){e.writeUInt64("payloadMilestone.index",BigInt(t.index)),e.writeUInt64("payloadMilestone.dataLength",BigInt(t.timestamp)),e.writeFixedBufferHex("payloadMilestone.data",64,t.inclusionMerkleProof),e.writeFixedBufferHex("payloadMilestone.data",64,t.signature)}function ie(e){if(!e.hasRemaining(4))throw new Error("Indexation Payload data is "+e.length()+" in length which is less than the minimimum size required of 4");var t=e.readString("payloadIndexation.index"),n=e.readUInt32("payloadIndexation.dataLength");return{type:2,index:t,data:e.readFixedBufferHex("payloadIndexation.data",n)}}function oe(e,t){e.writeString("payloadIndexation.index",t.index),e.writeUInt32("payloadIndexation.dataLength",t.data.length/2),e.writeFixedBufferHex("payloadIndexation.data",t.data.length/2,t.data)}var se=1+2*p+4+8;var ae=function(){function e(e){if(this._path=[],e){if(!/^m((?:\/\d+')*)$/.test(e))throw new Error("Bip32 Path is not in correct format");this._path=e.slice(2).replace(/'/g,"").split("/").map((function(e){return Number.parseInt(e,10)}))}}return e.prototype.toString=function(){return"m/"+this._path.map((function(e){return e+"'"})).join("/")},e.prototype.push=function(e){this._path.push(e)},e.prototype.pop=function(){return this._path.pop()},e}(),ue=function(){function e(){this._secretKey=Buffer.alloc(0)}return e.fromBytes=function(t){var n=new e;return n._secretKey=t,n},e.fromString=function(t){var n=new e;return n._secretKey=Buffer.from(t,"hex"),n},e.random=function(){return e.fromBytes(Buffer.from(n.randomBytes(e.SEED_SIZE_BYTES)))},e.prototype.generateKeyPair=function(){var e=n.sign.keyPair.fromSeed(this._secretKey);return{publicKey:Buffer.from(e.publicKey).toString("hex"),privateKey:Buffer.from(e.secretKey).toString("hex")}},e.prototype.generateSubseed=function(t){var n=i.derivePath(t.toString(),this._secretKey.toString("hex")).key;return e.fromBytes(n)},e.prototype.toBytes=function(){return this._secretKey},e.prototype.toString=function(){return this._secretKey.toString("hex")},e.SEED_SIZE_BYTES=32,e}();function de(e,t){if(t)if(0===t.type){var n=t;if(console.log(e+"Transaction Payload"),0===n.essence.type){if(n.essence.inputs){console.log(e+"\tInputs:",n.essence.inputs.length);for(var r=0,i=n.essence.inputs;r<i.length;r++){le(e+"\t\t",i[r])}}if(n.essence.outputs){console.log(e+"\tOutputs:",n.essence.outputs.length);for(var o=0,s=n.essence.outputs;o<s.length;o++){he(e+"\t\t",s[o])}}de(e+"\t",n.essence.payload)}if(n.unlockBlocks){console.log(e+"\tUnlock Blocks:",n.unlockBlocks.length);for(var a=0,u=n.unlockBlocks;a<u.length;a++){pe(e+"\t\t",u[a])}}}else if(1===t.type){n=t;console.log(e+"Milestone Payload"),console.log(e+"\tIndex:",n.index),console.log(e+"\tTimestamp:",n.timestamp),console.log(e+"\tInclusion Merkle Proof:",n.inclusionMerkleProof),console.log(e+"\tSignature:",n.signature)}else if(2===t.type){n=t;console.log(e+"Indexation Payload"),console.log(e+"\tIndex:",n.index),console.log(e+"\tData:",Buffer.from(n.data,"hex").toString())}}function ce(e,t){if(t&&1===t.type){var n=t;console.log(e+"Ed25519 Address"),console.log(e+"\tAddress:",n.address)}}function fe(e,t){if(t&&1===t.type){var n=t;console.log(e+"Ed25519 Signature"),console.log(e+"\tPublic Key:",n.publicKey),console.log(e+"\tSignature:",n.signature)}}function le(e,t){if(t&&0===t.type){var n=t;console.log(e+"UTXO Input"),console.log(e+"\tTransaction Id:",n.transactionId),console.log(e+"\tTransaction Output Index:",n.transactionOutputIndex)}}function he(e,t){if(t&&0===t.type){var n=t;console.log(e+"Signature Locked Single Output"),ce(e+"\t\t",n.address),console.log(e+"\t\tAmount:",n.amount)}}function pe(e,t){if(t)if(0===t.type){var n=t;console.log(e+"\tSignature Unlock Block"),fe(e+"\t\t\t",n.signature)}else if(1===t.type){n=t;console.log(e+"\tReference Unlock Block"),console.log(e+"\t\tReference:",n.reference)}}var ge=function(){function e(e,t){void 0===t&&(t=0),this._buffer=e,this._readIndex=t}return e.prototype.length=function(){return this._buffer.length},e.prototype.hasRemaining=function(e){return this._readIndex+e<=this._buffer.length},e.prototype.unused=function(){return this._buffer.length-this._readIndex},e.prototype.readFixedBufferHex=function(e,t){if(!this.hasRemaining(t))throw new Error(e+" length "+t+" exceeds the remaining data "+this.unused());var n=this._buffer.slice(this._readIndex,this._readIndex+t);return this._readIndex+=t,n.toString("hex")},e.prototype.readByte=function(e){if(!this.hasRemaining(1))throw new Error(e+" length 1 exceeds the remaining data "+this.unused());var t=this._buffer.readUInt8(this._readIndex);return this._readIndex+=1,t},e.prototype.readUInt16=function(e){if(!this.hasRemaining(2))throw new Error(e+" length 2 exceeds the remaining data "+this.unused());var t=this._buffer.readUInt16LE(this._readIndex);return this._readIndex+=2,t},e.prototype.readUInt32=function(e){if(!this.hasRemaining(4))throw new Error(e+" length 4 exceeds the remaining data "+this.unused());var t=this._buffer.readUInt32LE(this._readIndex);return this._readIndex+=4,t},e.prototype.readUInt64=function(e){if(!this.hasRemaining(8))throw new Error(e+" length 8 exceeds the remaining data "+this.unused());var t=this._buffer.readBigUInt64LE(this._readIndex);return this._readIndex+=8,t},e.prototype.readString=function(e){var t=this.readUInt16(e);if(!this.hasRemaining(t))throw new Error(e+" length "+t+" exceeds the remaining data "+this.unused());var n=this._buffer.slice(this._readIndex,this._readIndex+t);return this._readIndex+=t,n.toString()},e}(),ye=function(){function e(){this._buffer=Buffer.alloc(e.CHUNK_SIZE),this._writeIndex=0}return e.prototype.length=function(){return this._buffer.length},e.prototype.unused=function(){return this._buffer.length-this._writeIndex},e.prototype.finalBuffer=function(){return this._buffer.slice(0,this._writeIndex)},e.prototype.getWriteIndex=function(){return this._writeIndex},e.prototype.setWriteIndex=function(e){this._writeIndex=e},e.prototype.writeFixedBufferHex=function(e,t,n){if(!y(n))throw new Error("The "+n+" should be in hex format");if(2*t!==n.length)throw new Error(e+" length "+2*t+" does not match value length "+n.length);this.expand(t),this._buffer.write(n,this._writeIndex,"hex"),this._writeIndex+=t},e.prototype.writeByte=function(e,t){this.expand(1),this._buffer.writeUInt8(t,this._writeIndex),this._writeIndex+=1},e.prototype.writeUInt16=function(e,t){this.expand(2),this._buffer.writeUInt16LE(t,this._writeIndex),this._writeIndex+=2},e.prototype.writeUInt32=function(e,t){this.expand(4),this._buffer.writeUInt32LE(t,this._writeIndex),this._writeIndex+=4},e.prototype.writeUInt64=function(e,t){this.expand(8),this._buffer.writeBigUInt64LE(t,this._writeIndex),this._writeIndex+=8},e.prototype.writeString=function(e,t){return this.writeUInt16(e,t.length),this.expand(t.length),this._buffer.write(t,this._writeIndex),this._writeIndex+=t.length,t},e.prototype.expand=function(t){this._writeIndex+t>this._buffer.byteLength&&(this._buffer=Buffer.concat([this._buffer,Buffer.alloc(e.CHUNK_SIZE)]))},e.CHUNK_SIZE=4096,e}();e.ARRAY_LENGTH=2,e.BYTE_SIZE=1,e.Bip32Path=ae,e.Blake2b=l,e.Client=f,e.ClientError=c,e.Ed25519=h,e.Ed25519Seed=ue,e.MESSAGE_ID_LENGTH=p,e.MIN_ADDRESS_LENGTH=1,e.MIN_ED25519_ADDRESS_LENGTH=m,e.MIN_ED25519_SIGNATURE_LENGTH=A,e.MIN_INDEXATION_PAYLOAD_LENGTH=4,e.MIN_INPUT_LENGTH=1,e.MIN_MILESTONE_PAYLOAD_LENGTH=144,e.MIN_OUTPUT_LENGTH=1,e.MIN_PAYLOAD_LENGTH=4,e.MIN_REFERENCE_UNLOCK_BLOCK_LENGTH=2,e.MIN_SIGNATURE_LENGTH=1,e.MIN_SIGNATURE_UNLOCK_BLOCK_LENGTH=F,e.MIN_SIG_LOCKED_OUTPUT_LENGTH=T,e.MIN_TRANSACTION_ESSENCE_LENGTH=8,e.MIN_TRANSACTION_PAYLOAD_LENGTH=4,e.MIN_UNLOCK_BLOCK_LENGTH=1,e.MIN_UTXO_INPUT_LENGTH=E,e.ReadBuffer=ge,e.STRING_LENGTH=2,e.TRANSACTION_ID_LENGTH=g,e.TYPE_LENGTH=4,e.UINT16_SIZE=2,e.UINT32_SIZE=4,e.UINT64_SIZE=8,e.WriteBuffer=ye,e.deserializeAddress=I,e.deserializeEd25519Address=_,e.deserializeEd25519Signature=D,e.deserializeIndexationPayload=ie,e.deserializeInput=S,e.deserializeInputs=v,e.deserializeMessage=function(e){if(!e.hasRemaining(se))throw new Error("Message data is "+e.length()+" in length which is less than the minimimum size required of "+se);var t=e.readByte("message.version");if(1!==t)throw new Error("Unsupported message version number: "+t);var n=e.readFixedBufferHex("message.parent1MessageId",p),r=e.readFixedBufferHex("message.parent2MessageId",p),i=V(e),o=e.readUInt64("message.nonce"),s=e.unused();if(0!==s)throw new Error("Message data length "+e.length()+" has unused data "+s);return{version:t,payload:i,parent1MessageId:n,parent2MessageId:r,nonce:Number(o)}},e.deserializeMilestonePayload=ne,e.deserializeOutput=P,e.deserializeOutputs=N,e.deserializePayload=V,e.deserializeReferenceUnlockBlock=X,e.deserializeSigLockedSingleOutput=L,e.deserializeSignature=G,e.deserializeSignatureUnlockBlock=Y,e.deserializeTransactionEssence=O,e.deserializeTransactionPayload=ee,e.deserializeUTXOInput=b,e.deserializeUnlockBlock=j,e.deserializeUnlockBlocks=Z,e.isHex=y,e.logAddress=ce,e.logInput=le,e.logMessage=function(e,t){console.log(e+"\tVersion:",t.version),console.log(e+"\tParent 1 Message Id:",t.parent1MessageId),console.log(e+"\tParent 2 Message Id:",t.parent2MessageId),de(e+"\t",t.payload),void 0!==t.nonce&&console.log(e+"\tNonce:",t.nonce)},e.logOutput=he,e.logPayload=de,e.logSignature=fe,e.logUnlockBlock=pe,e.serializeAddress=w,e.serializeEd25519Address=x,e.serializeEd25519Signature=C,e.serializeIndexationPayload=oe,e.serializeInput=B,e.serializeInputs=U,e.serializeMessage=function(e,t){e.writeByte("message.version",t.version),e.writeFixedBufferHex("message.parent1MessageId",p,t.parent1MessageId),e.writeFixedBufferHex("message.parent2MessageId",p,t.parent2MessageId),Q(e,t.payload),e.writeUInt64("message.nonce",BigInt(t.nonce))},e.serializeMilestonePayload=re,e.serializeOutput=R,e.serializeOutputs=z,e.serializePayload=Q,e.serializeReferenceUnlockBlock=$,e.serializeSigLockedSingleOutput=M,e.serializeSignature=K,e.serializeSignatureUnlockBlock=W,e.serializeTransactionEssence=H,e.serializeTransactionPayload=te,e.serializeUTXOInput=k,e.serializeUnlockBlock=J,e.serializeUnlockBlocks=q,Object.defineProperty(e,"__esModule",{value:!0})}));