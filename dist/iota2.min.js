!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("buffer"),require("cross-fetch"),require("tweetnacl"),require("blakejs"),require("crypto")):"function"==typeof define&&define.amd?define(["buffer","cross-fetch","tweetnacl","blakejs","crypto"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Iota2=t(e.buffer_1,e["cross-fetch"],e.tweetnacl,e.blakejs,e.crypto)}(this,(function(e,t,n,i,r){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=o(e),a=o(t),u=o(n),d=o(i),l=o(r),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var h=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=void 0;class n extends Error{constructor(e,t,n,i){super(e),this.route=t,this.httpStatus=n,this.code=i}}t.ClientError=n})),p=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),y=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),I=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),E=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),g=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),N=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),T=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),m=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),w=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),v=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),S=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),M=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),L=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},i=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SingleNodeClient=void 0;const r=i(a.default);t.SingleNodeClient=class{constructor(e){if(!/^https?:\/\/\w+(\.\w+)*(:\d+)?(\/.*)?$/.test(e))throw new Error("The endpoint is not in the correct format");this._endpoint=e.replace(/\/+$/,"")}health(){return n(this,void 0,void 0,(function*(){const e=yield this.fetchStatus("/health");if(200===e)return!0;if(503===e)return!1;throw new h.ClientError("Unexpected response code","/health",e)}))}info(){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/info")}))}tips(){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/tips")}))}message(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/messages/"+e)}))}messageMetadata(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get",`/api/v1/messages/${e}/metadata`)}))}messageRaw(e){return n(this,void 0,void 0,(function*(){return this.fetchBinary("get",`/api/v1/messages/${e}/raw`)}))}messageSubmit(e){return n(this,void 0,void 0,(function*(){return(yield this.fetchJson("post","/api/v1/messages",e)).messageId}))}messageSubmitRaw(e){return n(this,void 0,void 0,(function*(){return(yield this.fetchBinary("post","/api/v1/messages",e)).messageId}))}messagesFind(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/messages?index="+encodeURIComponent(e))}))}messageChildren(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get",`/api/v1/messages/${e}/children`)}))}output(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/outputs/"+e)}))}address(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/addresses/"+e)}))}addressOutputs(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get",`/api/v1/addresses/${e}/outputs`)}))}milestone(e){return n(this,void 0,void 0,(function*(){return this.fetchJson("get","/api/v1/milestones/"+e)}))}fetchStatus(e){return n(this,void 0,void 0,(function*(){return(yield r.default(`${this._endpoint}${e}`,{method:"get"})).status}))}fetchJson(e,t,i){var o,s,a;return n(this,void 0,void 0,(function*(){const n=yield r.default(`${this._endpoint}${t}`,{method:e,headers:{"Content-Type":"application/json"},body:i?JSON.stringify(i):void 0}),u=yield n.json();if(n.ok&&!u.error)return u.data;throw new h.ClientError(null!==(s=null===(o=u.error)||void 0===o?void 0:o.message)&&void 0!==s?s:n.statusText,t,n.status,null===(a=u.error)||void 0===a?void 0:a.code)}))}fetchBinary(e,t,i){var o,s,a;return n(this,void 0,void 0,(function*(){const n=yield r.default(`${this._endpoint}${t}`,{method:e,headers:{"Content-Type":"application/octet-stream"},body:i});let u;if(n.ok){if("get"===e)return Buffer.from(yield n.arrayBuffer());if(u=yield n.json(),!(null==u?void 0:u.error))return null==u?void 0:u.data}throw u||(u=yield n.json()),new h.ClientError(null!==(s=null===(o=null==u?void 0:u.error)||void 0===o?void 0:o.message)&&void 0!==s?s:n.statusText,t,n.status,null===(a=null==u?void 0:u.error)||void 0===a?void 0:a.code)}))}}})),U=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Blake2b=void 0;class n{static sum256(e){return Buffer.from(d.default.blake2b(e,void 0,n.SIZE_256))}}t.Blake2b=n,n.SIZE_256=32})),O=_((function(e,t){var n=c&&c.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),i=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Ed25519=void 0;const o=r(u.default);class s{static signData(e,t){return Buffer.from(o.sign.detached(t,Buffer.from(e,"hex"))).toString("hex")}static verifyData(e,t,n){return o.sign.detached.verify(n,Buffer.from(t,"hex"),Buffer.from(e,"hex"))}static publicKeyToAddress(e){return U.Blake2b.sum256(Buffer.from(e,"hex")).toString("hex")}static verifyAddress(e,t){return s.publicKeyToAddress(e)===t}}t.Ed25519=s,s.VERSION=1,s.PUBLIC_KEY_SIZE=32,s.SIGNATURE_SIZE=64,s.ADDRESS_LENGTH=U.Blake2b.SIZE_256})),x=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHex=t.ARRAY_LENGTH=t.STRING_LENGTH=t.SMALL_TYPE_LENGTH=t.TYPE_LENGTH=t.TRANSACTION_ID_LENGTH=t.MESSAGE_ID_LENGTH=t.UINT64_SIZE=t.UINT32_SIZE=t.UINT16_SIZE=t.BYTE_SIZE=void 0,t.BYTE_SIZE=1,t.UINT16_SIZE=2,t.UINT32_SIZE=4,t.UINT64_SIZE=8,t.MESSAGE_ID_LENGTH=U.Blake2b.SIZE_256,t.TRANSACTION_ID_LENGTH=U.Blake2b.SIZE_256,t.TYPE_LENGTH=t.UINT32_SIZE,t.SMALL_TYPE_LENGTH=t.BYTE_SIZE,t.STRING_LENGTH=t.UINT16_SIZE,t.ARRAY_LENGTH=t.UINT16_SIZE,t.isHex=function(e){return e.length%2!=1&&/[\da-f]/gi.test(e)}})),P=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_ED25519_ADDRESS_LENGTH))throw new Error(`Ed25519 address data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_ED25519_ADDRESS_LENGTH}`);const n=e.readByte("ed25519Address.type");if(1!==n)throw new Error("Type mismatch in ed25519Address "+n);return{type:n,address:e.readFixedBufferHex("ed25519Address.address",O.Ed25519.ADDRESS_LENGTH)}}function i(e,t){e.writeByte("ed25519Address.type",t.type),e.writeFixedBufferHex("ed25519Address.address",O.Ed25519.ADDRESS_LENGTH,t.address)}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEd25519Address=t.deserializeEd25519Address=t.serializeAddress=t.deserializeAddress=t.MIN_ED25519_ADDRESS_LENGTH=t.MIN_ADDRESS_LENGTH=void 0,t.MIN_ADDRESS_LENGTH=x.SMALL_TYPE_LENGTH,t.MIN_ED25519_ADDRESS_LENGTH=t.MIN_ADDRESS_LENGTH+O.Ed25519.ADDRESS_LENGTH,t.deserializeAddress=function(e){if(!e.hasRemaining(t.MIN_ADDRESS_LENGTH))throw new Error(`Address data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_ADDRESS_LENGTH}`);const i=e.readByte("address.type",!1);let r;if(1!==i)throw new Error("Unrecognized address type "+i);return r=n(e),r},t.serializeAddress=function(e,t){if(1!==t.type)throw new Error("Unrecognized address type "+t.type);i(e,t)},t.deserializeEd25519Address=n,t.serializeEd25519Address=i})),B=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_INPUT_LENGTH))throw new Error(`Input data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_INPUT_LENGTH}`);const n=e.readByte("input.type",!1);let i;if(0!==n)throw new Error("Unrecognized input type "+n);return i=r(e),i}function i(e,t){if(0!==t.type)throw new Error("Unrecognized input type "+t.type);o(e,t)}function r(e){if(!e.hasRemaining(t.MIN_UTXO_INPUT_LENGTH))throw new Error(`UTXO Input data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_UTXO_INPUT_LENGTH}`);const n=e.readByte("utxoInput.type");if(0!==n)throw new Error("Type mismatch in utxoInput "+n);return{type:n,transactionId:e.readFixedBufferHex("utxoInput.transactionId",x.TRANSACTION_ID_LENGTH),transactionOutputIndex:e.readUInt16("utxoInput.transactionOutputIndex")}}function o(e,t){e.writeByte("utxoInput.type",t.type),e.writeFixedBufferHex("utxoInput.transactionId",x.TRANSACTION_ID_LENGTH,t.transactionId),e.writeUInt16("utxoInput.transactionOutputIndex",t.transactionOutputIndex)}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUTXOInput=t.deserializeUTXOInput=t.serializeInput=t.deserializeInput=t.serializeInputs=t.deserializeInputs=t.MIN_UTXO_INPUT_LENGTH=t.MIN_INPUT_LENGTH=void 0,t.MIN_INPUT_LENGTH=x.SMALL_TYPE_LENGTH,t.MIN_UTXO_INPUT_LENGTH=t.MIN_INPUT_LENGTH+x.TRANSACTION_ID_LENGTH+x.UINT16_SIZE,t.deserializeInputs=function(e){const t=e.readUInt16("inputs.numInputs"),i=[];for(let r=0;r<t;r++)i.push(n(e));return i},t.serializeInputs=function(e,t){e.writeUInt16("inputs.numInputs",t.length);for(let n=0;n<t.length;n++)i(e,t[n])},t.deserializeInput=n,t.serializeInput=i,t.deserializeUTXOInput=r,t.serializeUTXOInput=o})),b=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_OUTPUT_LENGTH))throw new Error(`Output data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_OUTPUT_LENGTH}`);const n=e.readByte("output.type",!1);let i;if(0!==n)throw new Error("Unrecognized output type "+n);return i=r(e),i}function i(e,t){if(0!==t.type)throw new Error("Unrecognized output type "+t.type);o(e,t)}function r(e){if(!e.hasRemaining(t.MIN_SIG_LOCKED_OUTPUT_LENGTH))throw new Error(`Signature Locked Single Output data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_SIG_LOCKED_OUTPUT_LENGTH}`);const n=e.readByte("sigLockedSingleOutput.type");if(0!==n)throw new Error("Type mismatch in sigLockedSingleOutput "+n);const i=P.deserializeAddress(e),r=e.readUInt64("sigLockedSingleOutput.amount");return{type:n,address:i,amount:Number(r)}}function o(e,t){e.writeByte("sigLockedSingleOutput.type",t.type),P.serializeAddress(e,t.address),e.writeUInt64("sigLockedSingleOutput.amount",BigInt(t.amount))}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSigLockedSingleOutput=t.deserializeSigLockedSingleOutput=t.serializeOutput=t.deserializeOutput=t.serializeOutputs=t.deserializeOutputs=t.MIN_SIG_LOCKED_OUTPUT_LENGTH=t.MIN_OUTPUT_LENGTH=void 0,t.MIN_OUTPUT_LENGTH=x.SMALL_TYPE_LENGTH,t.MIN_SIG_LOCKED_OUTPUT_LENGTH=t.MIN_OUTPUT_LENGTH+P.MIN_ADDRESS_LENGTH+P.MIN_ED25519_ADDRESS_LENGTH,t.deserializeOutputs=function(e){const t=e.readUInt16("outputs.numOutputs"),i=[];for(let r=0;r<t;r++)i.push(n(e));return i},t.serializeOutputs=function(e,t){e.writeUInt16("outputs.numOutputs",t.length);for(let n=0;n<t.length;n++)i(e,t[n])},t.deserializeOutput=n,t.serializeOutput=i,t.deserializeSigLockedSingleOutput=r,t.serializeSigLockedSingleOutput=o})),A=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTransactionEssence=t.deserializeTransactionEssence=t.MIN_TRANSACTION_ESSENCE_LENGTH=void 0,t.MIN_TRANSACTION_ESSENCE_LENGTH=x.UINT32_SIZE+2*x.ARRAY_LENGTH+x.UINT32_SIZE,t.deserializeTransactionEssence=function(e){if(!e.hasRemaining(t.MIN_TRANSACTION_ESSENCE_LENGTH))throw new Error(`Transaction essence data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_TRANSACTION_ESSENCE_LENGTH}`);const n=e.readUInt32("transactionEssence.type");if(0!==n)throw new Error("Type mismatch in transactionEssence "+n);const i=B.deserializeInputs(e),r=b.deserializeOutputs(e),o=z.deserializePayload(e);if(o&&2!==o.type)throw new Error("Transaction essence can only contain embedded Indexation Payload");return{type:n,inputs:i,outputs:r,payload:o}},t.serializeTransactionEssence=function(e,t){e.writeUInt32("transactionEssence.type",t.type),B.serializeInputs(e,t.inputs),b.serializeOutputs(e,t.outputs),z.serializePayload(e,t.payload)}})),G=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_ED25519_SIGNATURE_LENGTH))throw new Error(`Ed25519 signature data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_ED25519_SIGNATURE_LENGTH}`);const n=e.readByte("ed25519Signature.type");if(1!==n)throw new Error("Type mismatch in ed25519Signature "+n);return{type:n,publicKey:e.readFixedBufferHex("ed25519Signature.publicKey",O.Ed25519.PUBLIC_KEY_SIZE),signature:e.readFixedBufferHex("ed25519Signature.signature",O.Ed25519.SIGNATURE_SIZE)}}function i(e,t){e.writeByte("ed25519Signature.type",t.type),e.writeFixedBufferHex("ed25519Signature.publicKey",O.Ed25519.PUBLIC_KEY_SIZE,t.publicKey),e.writeFixedBufferHex("ed25519Signature.signature",O.Ed25519.SIGNATURE_SIZE,t.signature)}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEd25519Signature=t.deserializeEd25519Signature=t.serializeSignature=t.deserializeSignature=t.MIN_ED25519_SIGNATURE_LENGTH=t.MIN_SIGNATURE_LENGTH=void 0,t.MIN_SIGNATURE_LENGTH=x.SMALL_TYPE_LENGTH,t.MIN_ED25519_SIGNATURE_LENGTH=t.MIN_SIGNATURE_LENGTH+O.Ed25519.SIGNATURE_SIZE+O.Ed25519.PUBLIC_KEY_SIZE,t.deserializeSignature=function(e){if(!e.hasRemaining(t.MIN_SIGNATURE_LENGTH))throw new Error(`Signature data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_SIGNATURE_LENGTH}`);const i=e.readByte("signature.type",!1);let r;if(1!==i)throw new Error("Unrecognized signature type "+i);return r=n(e),r},t.serializeSignature=function(e,t){if(1!==t.type)throw new Error("Unrecognized signature type "+t.type);i(e,t)},t.deserializeEd25519Signature=n,t.serializeEd25519Signature=i})),H=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_UNLOCK_BLOCK_LENGTH))throw new Error(`Unlock Block data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_UNLOCK_BLOCK_LENGTH}`);const n=e.readByte("unlockBlock.type",!1);let i;if(0===n)i=r(e);else{if(1!==n)throw new Error("Unrecognized unlock block type "+n);i=s(e)}return i}function i(e,t){if(0===t.type)o(e,t);else{if(1!==t.type)throw new Error("Unrecognized unlock block type "+t.type);a(e,t)}}function r(e){if(!e.hasRemaining(t.MIN_SIGNATURE_UNLOCK_BLOCK_LENGTH))throw new Error(`Signature Unlock Block data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_SIGNATURE_UNLOCK_BLOCK_LENGTH}`);const n=e.readByte("signatureUnlockBlock.type");if(0!==n)throw new Error("Type mismatch in signatureUnlockBlock "+n);return{type:n,signature:G.deserializeSignature(e)}}function o(e,t){e.writeByte("signatureUnlockBlock.type",t.type),G.serializeSignature(e,t.signature)}function s(e){if(!e.hasRemaining(t.MIN_REFERENCE_UNLOCK_BLOCK_LENGTH))throw new Error(`Reference Unlock Block data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_REFERENCE_UNLOCK_BLOCK_LENGTH}`);const n=e.readByte("referenceUnlockBlock.type");if(1!==n)throw new Error("Type mismatch in referenceUnlockBlock "+n);return{type:n,reference:e.readUInt16("referenceUnlockBlock.reference")}}function a(e,t){e.writeByte("referenceUnlockBlock.type",t.type),e.writeUInt16("referenceUnlockBlock.reference",t.reference)}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeReferenceUnlockBlock=t.deserializeReferenceUnlockBlock=t.serializeSignatureUnlockBlock=t.deserializeSignatureUnlockBlock=t.serializeUnlockBlock=t.deserializeUnlockBlock=t.serializeUnlockBlocks=t.deserializeUnlockBlocks=t.MIN_REFERENCE_UNLOCK_BLOCK_LENGTH=t.MIN_SIGNATURE_UNLOCK_BLOCK_LENGTH=t.MIN_UNLOCK_BLOCK_LENGTH=void 0,t.MIN_UNLOCK_BLOCK_LENGTH=x.SMALL_TYPE_LENGTH,t.MIN_SIGNATURE_UNLOCK_BLOCK_LENGTH=t.MIN_UNLOCK_BLOCK_LENGTH+G.MIN_SIGNATURE_LENGTH,t.MIN_REFERENCE_UNLOCK_BLOCK_LENGTH=t.MIN_UNLOCK_BLOCK_LENGTH+x.UINT16_SIZE,t.deserializeUnlockBlocks=function(e){const t=e.readUInt16("transactionEssence.numUnlockBlocks"),i=[];for(let r=0;r<t;r++)i.push(n(e));return i},t.serializeUnlockBlocks=function(e,t){e.writeUInt16("transactionEssence.numUnlockBlocks",t.length);for(let n=0;n<t.length;n++)i(e,t[n])},t.deserializeUnlockBlock=n,t.serializeUnlockBlock=i,t.deserializeSignatureUnlockBlock=r,t.serializeSignatureUnlockBlock=o,t.deserializeReferenceUnlockBlock=s,t.serializeReferenceUnlockBlock=a})),z=_((function(e,t){function n(e){if(!e.hasRemaining(t.MIN_TRANSACTION_PAYLOAD_LENGTH))throw new Error(`Transaction Payload data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_TRANSACTION_PAYLOAD_LENGTH}`);const n=e.readUInt32("payloadTransaction.type");if(0!==n)throw new Error("Type mismatch in payloadTransaction "+n);let i,r;if(0!==e.readUInt32("payloadTransaction.essenceType",!1))throw new Error("Unrecognized transaction essence type "+n);return i=A.deserializeTransactionEssence(e),r=H.deserializeUnlockBlocks(e),{type:n,essence:i,unlockBlocks:r}}function i(e,t){if(e.writeUInt32("payloadMilestone.type",t.type),0!==t.type)throw new Error("Unrecognized transaction type "+t.type);A.serializeTransactionEssence(e,t.essence),H.serializeUnlockBlocks(e,t.unlockBlocks)}function r(e){if(!e.hasRemaining(t.MIN_MILESTONE_PAYLOAD_LENGTH))throw new Error(`Milestone Payload data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_MILESTONE_PAYLOAD_LENGTH}`);const n=e.readUInt32("payloadMilestone.type");if(1!==n)throw new Error("Type mismatch in payloadMilestone "+n);const i=e.readUInt64("payloadMilestone.index"),r=e.readUInt64("payloadMilestone.timestamp"),o=e.readFixedBufferHex("payloadMilestone.inclusionMerkleProof",64),s=e.readByte("payloadMilestone.signaturesCount"),a=[];for(let t=0;t<s;t++)a.push(e.readFixedBufferHex("payloadMilestone.signature",64));return{type:n,index:Number(i),timestamp:Number(r),inclusionMerkleProof:o,signatures:a}}function o(e,t){e.writeUInt32("payloadMilestone.type",t.type),e.writeUInt64("payloadMilestone.index",BigInt(t.index)),e.writeUInt64("payloadMilestone.timestamp",BigInt(t.timestamp)),e.writeFixedBufferHex("payloadMilestone.inclusionMerkleProof",64,t.inclusionMerkleProof),e.writeByte("payloadMilestone.signaturesCount",t.signatures.length);for(let n=0;n<t.signatures.length;n++)e.writeFixedBufferHex("payloadMilestone.signature",64,t.signatures[n])}function s(e){if(!e.hasRemaining(t.MIN_INDEXATION_PAYLOAD_LENGTH))throw new Error(`Indexation Payload data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_INDEXATION_PAYLOAD_LENGTH}`);const n=e.readUInt32("payloadIndexation.type");if(2!==n)throw new Error("Type mismatch in payloadIndexation "+n);const i=e.readString("payloadIndexation.index"),r=e.readUInt32("payloadIndexation.dataLength");return{type:2,index:i,data:e.readFixedBufferHex("payloadIndexation.data",r)}}function a(e,t){e.writeUInt32("payloadIndexation.type",t.type),e.writeString("payloadIndexation.index",t.index),e.writeUInt32("payloadIndexation.dataLength",t.data.length/2),e.writeFixedBufferHex("payloadIndexation.data",t.data.length/2,t.data)}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIndexationPayload=t.deserializeIndexationPayload=t.serializeMilestonePayload=t.deserializeMilestonePayload=t.serializeTransactionPayload=t.deserializeTransactionPayload=t.serializePayload=t.deserializePayload=t.MIN_TRANSACTION_PAYLOAD_LENGTH=t.MIN_INDEXATION_PAYLOAD_LENGTH=t.MIN_MILESTONE_PAYLOAD_LENGTH=t.MIN_PAYLOAD_LENGTH=void 0,t.MIN_PAYLOAD_LENGTH=x.TYPE_LENGTH,t.MIN_MILESTONE_PAYLOAD_LENGTH=t.MIN_PAYLOAD_LENGTH+2*x.UINT64_SIZE+64+x.BYTE_SIZE,t.MIN_INDEXATION_PAYLOAD_LENGTH=t.MIN_PAYLOAD_LENGTH+x.STRING_LENGTH+x.STRING_LENGTH,t.MIN_TRANSACTION_PAYLOAD_LENGTH=t.MIN_PAYLOAD_LENGTH+x.UINT32_SIZE,t.deserializePayload=function(e){if(!e.hasRemaining(t.MIN_PAYLOAD_LENGTH))throw new Error(`Payload data is ${e.length()} in length which is less than the minimimum size required of ${t.MIN_PAYLOAD_LENGTH}`);const i=e.readUInt32("payload.length");if(!e.hasRemaining(i))throw new Error(`Payload length ${i} exceeds the remaining data ${e.unused()}`);let o;if(i>0){const t=e.readUInt32("payload.type",!1);if(0===t)o=n(e);else if(1===t)o=r(e);else{if(2!==t)throw new Error("Unrecognized payload type "+t);o=s(e)}}return o},t.serializePayload=function(e,t){const n=e.getWriteIndex();if(e.writeUInt32("payload.length",0),t)if(0===t.type)i(e,t);else if(1===t.type)o(e,t);else{if(2!==t.type)throw new Error("Unrecognized transaction type "+t.type);a(e,t)}else;const r=e.getWriteIndex();e.setWriteIndex(n),e.writeUInt32("payload.length",r-n-x.UINT32_SIZE),e.setWriteIndex(r)},t.deserializeTransactionPayload=n,t.serializeTransactionPayload=i,t.deserializeMilestonePayload=r,t.serializeMilestonePayload=o,t.deserializeIndexationPayload=s,t.serializeIndexationPayload=a})),k=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeMessage=t.deserializeMessage=void 0;const n=x.BYTE_SIZE+2*x.MESSAGE_ID_LENGTH+z.MIN_PAYLOAD_LENGTH+x.UINT64_SIZE,i="0".repeat(2*x.MESSAGE_ID_LENGTH);t.deserializeMessage=function(e){if(!e.hasRemaining(n))throw new Error(`Message data is ${e.length()} in length which is less than the minimimum size required of ${n}`);const t=e.readByte("message.version");if(1!==t)throw new Error("Unsupported message version number: "+t);const i=e.readFixedBufferHex("message.parent1MessageId",x.MESSAGE_ID_LENGTH),r=e.readFixedBufferHex("message.parent2MessageId",x.MESSAGE_ID_LENGTH),o=z.deserializePayload(e),s=e.readUInt64("message.nonce"),a=e.unused();if(0!==a)throw new Error(`Message data length ${e.length()} has unused data ${a}`);return{version:t,payload:o,parent1MessageId:i,parent2MessageId:r,nonce:Number(s)}},t.serializeMessage=function(e,t){var n,r;e.writeByte("message.version",t.version),e.writeFixedBufferHex("message.parent1MessageId",x.MESSAGE_ID_LENGTH,null!==(n=t.parent1MessageId)&&void 0!==n?n:i),e.writeFixedBufferHex("message.parent2MessageId",x.MESSAGE_ID_LENGTH,null!==(r=t.parent2MessageId)&&void 0!==r?r:i),z.serializePayload(e,t.payload),e.writeUInt64("message.nonce",BigInt(t.nonce))}})),R=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Bip32Path=void 0;t.Bip32Path=class{constructor(e){e?(this._path=e.split("/"),"m"===this._path[0]&&this._path.shift()):this._path=[]}toString(){return this._path.length>0?"m/"+this._path.join("/"):"m"}push(e){this._path.push(""+e)}pushHardened(e){this._path.push(e+"'")}pop(){this._path.pop()}numberSegments(){return this._path.map((e=>Number.parseInt(e,10)))}}})),D=l.default.createHmac,K=_((function(e,t){var n=c&&c.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),i=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Slip0010=void 0;const s=o(D),a=r(u.default);class d{static getMasterKeyFromSeed(e){const t=s.default("sha512","ed25519 seed").update(e).digest();return{privateKey:t.slice(0,32),chainCode:t.slice(32)}}static derivePath(e,t){let{privateKey:n,chainCode:i}=d.getMasterKeyFromSeed(e);const r=t.numberSegments();for(let e=0;e<r.length;e++){const t=Buffer.allocUnsafe(4);t.writeUInt32BE(2147483648+r[e],0);const o=Buffer.concat([Buffer.alloc(1,0),n,t]),a=s.default("sha512",i).update(o).digest();n=a.slice(0,32),i=a.slice(32)}return{privateKey:n,chainCode:i}}static getPublicKey(e,t=!0){const n=a.sign.keyPair.fromSeed(e),i=Buffer.from(n.secretKey.slice(32));return t?Buffer.concat([Buffer.alloc(1,0),i]):i}}t.Slip0010=d})),j=_((function(e,t){var n=c&&c.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),i=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Ed25519Seed=void 0;const o=r(u.default);class s{constructor(){this._secretKey=Buffer.alloc(0)}static fromBytes(e){const t=new s;return t._secretKey=e,t}static fromString(e){const t=new s;return t._secretKey=Buffer.from(e,"hex"),t}static random(){return s.fromBytes(Buffer.from(o.randomBytes(s.SEED_SIZE_BYTES)))}keyPair(){const e=o.sign.keyPair.fromSeed(this._secretKey);return{publicKey:Buffer.from(e.publicKey).toString("hex"),privateKey:Buffer.from(e.secretKey).toString("hex")}}generateSeedFromPath(e){const t=K.Slip0010.derivePath(this._secretKey,e);return s.fromBytes(t.privateKey)}toBytes(){return this._secretKey}toString(){return this._secretKey.toString("hex")}}t.Ed25519Seed=s,s.SEED_SIZE_BYTES=32})),C=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHUNK_SIZE=void 0,t.DEFAULT_CHUNK_SIZE=20})),$=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUnspentAddresses=void 0,t.getUnspentAddresses=function(e,t,i,r,o){return n(this,void 0,void 0,(function*(){let n=null!=r?r:0;const s=null!=o?o:Number.MAX_SAFE_INTEGER;let a=!1;const u=[];do{i.push(n);const r=t.generateSeedFromPath(i).keyPair();i.pop();const o=O.Ed25519.publicKeyToAddress(r.publicKey),d=yield e.address(o);0===d.count?a=!0:(u.push({address:o,index:n,balance:d.balance}),u.length===s&&(a=!0)),n++}while(!a);return u}))}})),Y=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBalance=void 0,t.getBalance=function(e,t,i,r=0){return n(this,void 0,void 0,(function*(){return(yield $.getUnspentAddresses(e,t,i,r)).reduce(((e,t)=>e+t.balance),0)}))}})),Z=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAddressesKeyPairs=void 0,t.getAddressesKeyPairs=function(e,t,n=0,i=C.DEFAULT_CHUNK_SIZE){const r=[];for(let o=n;o<n+i;o++){t.push(o);const n=e.generateSeedFromPath(t);r.push(n.keyPair()),t.pop()}return r}})),F=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAddresses=void 0,t.getAddresses=function(e,t,n=0,i=C.DEFAULT_CHUNK_SIZE){return Z.getAddressesKeyPairs(e,t,n,i).map((e=>O.Ed25519.publicKeyToAddress(e.publicKey)))}})),q=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUnspentAddress=void 0,t.getUnspentAddress=function(e,t,i,r){return n(this,void 0,void 0,(function*(){const n=yield $.getUnspentAddresses(e,t,i,r,1);return n.length>0?n[0]:void 0}))}})),X=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveData=void 0,t.retrieveData=function(e,t){return n(this,void 0,void 0,(function*(){const n=yield e.message(t);if(null==n?void 0:n.payload){let e;if(0===n.payload.type?e=n.payload.essence.payload:2===n.payload.type&&(e=n.payload),e)return{index:e.index,data:Buffer.from(e.data,"hex")}}}))}})),J=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;class n{constructor(){this._buffer=Buffer.alloc(n.CHUNK_SIZE),this._writeIndex=0}length(){return this._buffer.length}unused(){return this._buffer.length-this._writeIndex}finalBuffer(){return this._buffer.slice(0,this._writeIndex)}getWriteIndex(){return this._writeIndex}setWriteIndex(e){this._writeIndex=e}writeFixedBufferHex(e,t,n){if(!x.isHex(n))throw new Error(`The ${n} should be in hex format`);if(2*t!==n.length)throw new Error(`${e} length ${n.length} does not match expected length ${2*t}`);this.expand(t),this._buffer.write(n,this._writeIndex,"hex"),this._writeIndex+=t}writeByte(e,t){this.expand(1),this._buffer.writeUInt8(t,this._writeIndex),this._writeIndex+=1}writeUInt16(e,t){this.expand(2),this._buffer.writeUInt16LE(t,this._writeIndex),this._writeIndex+=2}writeUInt32(e,t){this.expand(4),this._buffer.writeUInt32LE(t,this._writeIndex),this._writeIndex+=4}writeUInt64(e,t){if(this.expand(8),this._buffer.writeBigUInt64LE)this._buffer.writeBigUInt64LE(t,this._writeIndex);else{const e=8,n=t.toString(16),i=Buffer.from(n.padStart(2*e,"0"),"hex");i.reverse(),this._buffer.write(i.toString("hex"),this._writeIndex,"hex")}this._writeIndex+=8}writeString(e,t){return this.writeUInt16(e,t.length),this.expand(t.length),this._buffer.write(t,this._writeIndex),this._writeIndex+=t.length,t}expand(e){this._writeIndex+e>this._buffer.byteLength&&(this._buffer=Buffer.concat([this._buffer,Buffer.alloc(n.CHUNK_SIZE)]))}}t.WriteBuffer=n,n.CHUNK_SIZE=4096})),W=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sendAdvanced=void 0,t.sendAdvanced=function(e,t,i,r,o,s,a){return n(this,void 0,void 0,(function*(){if(!r||0===r.length)throw new Error("You must specify some outputs");const n=r.reduce(((e,t)=>e+t.amount),0);let u=null!=o?o:0,d=0;const l=[];let c=!1;do{i.push(u);const o=t.generateSeedFromPath(i).keyPair();i.pop();const s=O.Ed25519.publicKeyToAddress(o.publicKey),a=yield e.addressOutputs(s);for(const t of a.outputIds){const i=yield e.output(t);if(!i.isSpent&&0!==i.output.amount&&d<n){d+=i.output.amount;const e={type:0,transactionId:i.transactionId,transactionOutputIndex:i.outputIndex},t=new J.WriteBuffer;B.serializeInput(t,e),l.push({input:e,addressKeyPair:o,serialized:t.finalBuffer().toString("hex")}),d>=n&&(d-n>0&&r.push({amount:d-n,address:s}),c=!0)}}u++}while(!c);if(d<n)throw new Error("There are not enough funds in the inputs for the required balance");const f=[];for(const e of r){const t={type:0,address:{type:1,address:e.address},amount:e.amount},n=new J.WriteBuffer;b.serializeOutput(n,t),f.push({output:t,serialized:n.finalBuffer().toString("hex")})}const _=l.sort(((e,t)=>e.serialized.localeCompare(t.serialized))),h=f.sort(((e,t)=>e.serialized.localeCompare(t.serialized))),p={type:0,inputs:_.map((e=>e.input)),outputs:h.map((e=>e.output)),payload:s&&a?{type:2,index:s,data:a.toString("hex")}:void 0},y=new J.WriteBuffer;A.serializeTransactionEssence(y,p);const I=y.finalBuffer(),E=[],g={};for(const e of _)g[e.addressKeyPair.publicKey]?E.push({type:1,reference:g[e.addressKeyPair.publicKey].unlockIndex}):(E.push({type:0,signature:{type:1,publicKey:e.addressKeyPair.publicKey,signature:O.Ed25519.signData(e.addressKeyPair.privateKey,I)}}),g[e.addressKeyPair.publicKey]={keyPair:e.addressKeyPair,unlockIndex:E.length-1});const N={type:0,essence:p,unlockBlocks:E},T=yield e.tips(),m={version:1,parent1MessageId:T.tip1MessageId,parent2MessageId:T.tip2MessageId,payload:N,nonce:0};return{messageId:yield e.messageSubmit(m),message:m}}))}})),V=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.send=void 0,t.send=function(e,t,i,r,o,s){return n(this,void 0,void 0,(function*(){const n=yield W.sendAdvanced(e,t,i,[{address:r,amount:o}],s);return{messageId:n.messageId,message:n.message}}))}})),Q=_((function(e,t){var n=c&&c.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sendData=void 0,t.sendData=function(e,t,i){return n(this,void 0,void 0,(function*(){const n={type:2,index:t,data:i.toString("hex")},r=yield e.tips(),o={version:1,parent1MessageId:r.tip1MessageId,parent2MessageId:r.tip2MessageId,payload:n,nonce:0};return{message:o,messageId:yield e.messageSubmit(o)}}))}})),ee=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),te=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),ne=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),ie=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),re=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),oe=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),se=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),ae=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),ue=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),de=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),le=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),ce=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),fe=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),_e=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})})),he=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logUnlockBlock=t.logOutput=t.logInput=t.logSignature=t.logAddress=t.logPayload=t.logMessage=t.setLogger=void 0;let n=(e,t)=>t?console.log(e,t):console.log(e);function i(e,t){if(t)if(0===t.type){const r=t;if(n(e+"Transaction Payload"),0===r.essence.type){if(r.essence.inputs){n(e+"\tInputs:",r.essence.inputs.length);for(const t of r.essence.inputs)s(e+"\t\t",t)}if(r.essence.outputs){n(e+"\tOutputs:",r.essence.outputs.length);for(const t of r.essence.outputs)a(e+"\t\t",t)}i(e+"\t",r.essence.payload)}if(r.unlockBlocks){n(e+"\tUnlock Blocks:",r.unlockBlocks.length);for(const t of r.unlockBlocks)u(e+"\t\t",t)}}else if(1===t.type){const i=t;n(e+"Milestone Payload"),n(e+"\tIndex:",i.index),n(e+"\tTimestamp:",i.timestamp),n(e+"\tInclusion Merkle Proof:",i.inclusionMerkleProof),n(e+"\tSignatures:",i.signatures)}else if(2===t.type){const i=t;n(e+"Indexation Payload"),n(e+"\tIndex:",i.index),n(e+"\tData:",Buffer.from(i.data,"hex").toString())}}function r(e,t){if(t&&1===t.type){const i=t;n(e+"Ed25519 Address"),n(e+"\tAddress:",i.address)}}function o(e,t){if(t&&1===t.type){const i=t;n(e+"Ed25519 Signature"),n(e+"\tPublic Key:",i.publicKey),n(e+"\tSignature:",i.signature)}}function s(e,t){if(t&&0===t.type){const i=t;n(e+"UTXO Input"),n(e+"\tTransaction Id:",i.transactionId),n(e+"\tTransaction Output Index:",i.transactionOutputIndex)}}function a(e,t){if(t&&0===t.type){const i=t;n(e+"Signature Locked Single Output"),r(e+"\t\t",i.address),n(e+"\t\tAmount:",i.amount)}}function u(e,t){if(t)if(0===t.type){const i=t;n(e+"\tSignature Unlock Block"),o(e+"\t\t\t",i.signature)}else if(1===t.type){const i=t;n(e+"\tReference Unlock Block"),n(e+"\t\tReference:",i.reference)}}t.setLogger=function(e){n=e},t.logMessage=function(e,t){n(e+"\tVersion:",t.version),n(e+"\tParent 1 Message Id:",t.parent1MessageId),n(e+"\tParent 2 Message Id:",t.parent2MessageId),i(e+"\t",t.payload),void 0!==t.nonce&&n(e+"\tNonce:",t.nonce)},t.logPayload=i,t.logAddress=r,t.logSignature=o,t.logInput=s,t.logOutput=a,t.logUnlockBlock=u})),pe=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadBuffer=void 0;t.ReadBuffer=class{constructor(e,t=0){this._buffer=e,this._readIndex=t}length(){return this._buffer.length}hasRemaining(e){return this._readIndex+e<=this._buffer.length}unused(){return this._buffer.length-this._readIndex}readFixedBufferHex(e,t,n=!0){if(!this.hasRemaining(t))throw new Error(`${e} length ${t} exceeds the remaining data ${this.unused()}`);const i=this._buffer.slice(this._readIndex,this._readIndex+t);return n&&(this._readIndex+=t),i.toString("hex")}readByte(e,t=!0){if(!this.hasRemaining(1))throw new Error(`${e} length 1 exceeds the remaining data ${this.unused()}`);const n=this._buffer.readUInt8(this._readIndex);return t&&(this._readIndex+=1),n}readUInt16(e,t=!0){if(!this.hasRemaining(2))throw new Error(`${e} length 2 exceeds the remaining data ${this.unused()}`);const n=this._buffer.readUInt16LE(this._readIndex);return t&&(this._readIndex+=2),n}readUInt32(e,t=!0){if(!this.hasRemaining(4))throw new Error(`${e} length 4 exceeds the remaining data ${this.unused()}`);const n=this._buffer.readUInt32LE(this._readIndex);return t&&(this._readIndex+=4),n}readUInt64(e,t=!0){if(!this.hasRemaining(8))throw new Error(`${e} length 8 exceeds the remaining data ${this.unused()}`);let n;if(this._buffer.readBigUInt64LE)n=this._buffer.readBigUInt64LE(this._readIndex);else{const e=this._buffer.slice(this._readIndex,this._readIndex+8);e.reverse(),n=BigInt("0x"+e.toString("hex"))}return t&&(this._readIndex+=8),n}readString(e,t=!0){const n=this.readUInt16(e);if(!this.hasRemaining(n))throw new Error(`${e} length ${n} exceeds the remaining data ${this.unused()}`);const i=this._buffer.slice(this._readIndex,this._readIndex+n);return t&&(this._readIndex+=n),i.toString()}}}));return f(_((function(e,t){var n=c&&c.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),i=c&&c.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=void 0,Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return s.default.Buffer}}),i(h,t),i(p,t),i(y,t),i(I,t),i(E,t),i(g,t),i(N,t),i(T,t),i(m,t),i(w,t),i(v,t),i(S,t),i(M,t),i(L,t),i(P,t),i(x,t),i(B,t),i(k,t),i(b,t),i(z,t),i(G,t),i(A,t),i(H,t),i(R,t),i(U,t),i(O,t),i(j,t),i(K,t),i(C,t),i(Y,t),i(F,t),i(Z,t),i($,t),i(q,t),i(X,t),i(V,t),i(W,t),i(Q,t),i(ee,t),i(te,t),i(ne,t),i(ie,t),i(re,t),i(oe,t),i(se,t),i(ae,t),i(ue,t),i(de,t),i(le,t),i(ce,t),i(fe,t),i(_e,t),i(he,t),i(pe,t),i(J,t)})))}));